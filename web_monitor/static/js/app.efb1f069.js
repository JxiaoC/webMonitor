(function(t){function e(e){for(var s,o,r=e[0],l=e[1],c=e[2],u=0,m=[];u<r.length;u++)o=r[u],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={app:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"251c":function(t,e,a){},"26d6":function(t,e,a){"use strict";a("3184")},2941:function(t,e,a){"use strict";a("822d")},3184:function(t,e,a){},"3b60":function(t,e,a){},4490:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),n=a("5c96"),i=a.n(n),o=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navigation")],1)}),r=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:3}},[a("div",{attrs:{id:"nav"}},[a("h4",[t._v("Web/SSL 监测系统")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("监控类型")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(e){t.currentTab="http"}}},[t._v("网站监控")]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(e){t.currentTab="ssl"}}},[t._v("SSL证书监控")]),a("el-menu-item",{attrs:{index:"1-3"},on:{click:function(e){t.currentTab="host_expire"}}},[t._v("域名到期监控")])],1)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("系统设置")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.currentTab="setting"}}},[t._v("基础设置")])],1)],2)],1)],1)]),a("el-col",{attrs:{span:21}},[a(t.currentTabComponent,{tag:"component",staticClass:"tab"})],1)],1)},c=[],d=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("h3",[t._v("hihi")])])}],m={name:"home",props:{msg:String},data:function(){return{}}},f=m,p=a("2877"),h=Object(p["a"])(f,d,u,!1,null,null,null),g=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"http"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控url",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com"},model:{value:t.addData.url,callback:function(e){t.$set(t.addData,"url",e)},expression:"addData.url"}})],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.addData.rate,callback:function(e){t.$set(t.addData,"rate",e)},expression:"addData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("地址")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:8}},[a("div",[t._v("24小时可用性")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("频率")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("httpstatus",{key:t._id,attrs:{name:t.name,id:t._id,url:t.url,enable:t.enable,status24:t.status24,status24_success:t.status24_success,status24_fail:t.status24_fail,rate:t.rate,LastTime:t.ltime_str}})}))],2)},b=[],y=(a("b0c0"),a("4328")),_=a.n(y),w=a("bc3a"),x=a.n(w),D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"http_status",style:t.is_remove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"url-copy",attrs:{"data-clipboard-text":t.url},on:{click:t.copy}},[t._v(" "+t._s(t.url)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"24h"},[a("el-tooltip",{staticClass:"status-24h-msg",attrs:{placement:"bottom-end"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.status24_success)+" / "+t._s(t.status24_success+t.status24_fail)+" ")]),a("el-progress",{style:t.current24StatusTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.current24Status,status:t.current24StatusStr,format:t.format}})],1)],1)]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"rate"},[t._v(t._s(t.rate)+"分钟")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},C=[],k=(a("a9e3"),a("b311")),L=a.n(k),$={name:"http_status",props:{id:String,name:String,url:String,LastTime:String,enable:{type:Boolean,default:!1},status24:{type:Number,default:98},status24_fail:{type:Number,default:2},status24_success:{type:Number,default:100},rate:{type:Number,default:15}},data:function(){return{Loading:!1,is_remove:!1,currentEnable:this.enable,current24Status:this.status24,current24StatusStr:this.status24>=85?"success":this.status24>=25?"warning":"exception",current24StatusTextColor:this.status24>=30?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new L.a(".url-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.current24Status=this.status24,this.current24StatusStr=this.status24>=85?"success":this.status24>=25?"warning":"exception",this.current24StatusTextColor=this.status24>=30?"color: #fff;":"color: #000",this.current24Status+"% (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.is_remove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/remove",data:_.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/edit",data:_.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}}},S=$,R=(a("ee01"),Object(p["a"])(S,D,C,!1,null,null,null)),T=R.exports,E={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",url:"",rate:5},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}]},addDialogVisible:!1,list:[]}},components:{httpstatus:T},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/http_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/add",data:_.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),e.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.addData.name="",e.addData.url="",e.loadMonitor())}))}))}}},M=E,j=(a("8c02"),Object(p["a"])(M,v,b,!1,null,null,null)),O=j.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"ssl"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")]),a("el-button",{attrs:{type:"warning"},on:{click:t.refAll}},[t._v("重新查询到期时间")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控host",prop:"host"}},[a("el-input",{attrs:{placeholder:"www.baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("sslstatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},N=[],I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"ssl_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(t._s(t.host))])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},q=[],P={name:"ssl_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/90*100>100?100:this.rstDay/90*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/90*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new L.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/90*100>100?100:this.rstDay/90*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/90*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/remove",data:_.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/edit",data:_.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:_.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},A=P,B=(a("d82a"),Object(p["a"])(A,I,q,!1,null,null,null)),H=B.exports,J={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控host",trigger:"blur"},{pattern:/^.+\..+/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{sslstatus:H},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/ssl_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/add",data:_.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.addData.name="",e.addData.host="",e.loadMonitor())}))}))},refAll:function(){this.Loading=!0;var t=this;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref_all"}).then((function(e){0!=e.data.code?(t.$notify.error({title:"错误",message:e.data.msg}),t.Loading=!1):(t.$notify.success({title:"成功",message:"全部重新查询完成"}),t.addDialogVisible=!1,t.loadMonitor())}))}}},W=J,z=(a("26d6"),Object(p["a"])(W,V,N,!1,null,null,null)),F=z.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"host_expire"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("span",{staticClass:"tip"},[t._v("只有到期时间小于等于设置的报警时间时, 才会在每天自动刷新过期时间")]),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控域名",prop:"host"}},[a("el-input",{attrs:{placeholder:"baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("hoststatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},K=[],Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"host_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(" "+t._s(t.host)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},U=[],X={name:"host_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/365*100>100?100:this.rstDay/365*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/365*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new L.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/365*100>100?100:this.rstDay/365*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/365*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/remove",data:_.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/edit",data:_.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:_.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},Y=X,Z=(a("f635"),Object(p["a"])(Y,Q,U,!1,null,null,null)),tt=Z.exports,et={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控域名",trigger:"blur"},{pattern:/^\w+\.\w+$/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{hoststatus:tt},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/expire_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/add",data:_.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addData.name="",e.addData.host="",e.addDialogVisible=!1,e.loadMonitor())}))}))}}},at=et,st=(a("2941"),Object(p["a"])(at,G,K,!1,null,null,null)),nt=st.exports,it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"setting"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],ref:"data",attrs:{"label-position":"top",rules:t.rules,model:t.data,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Server酱Token",prop:"server_jiang_token"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"配置Server酱Token即可接受报警信息"},model:{value:t.data.server_jiang_token,callback:function(e){t.$set(t.data,"server_jiang_token",e)},expression:"data.server_jiang_token"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.sendTest}},[t._v("测试")])],1)],1)],1),a("el-form-item",{attrs:{label:"HTTP可用性报警阈值(次)"}},[a("el-input-number",{attrs:{min:1,max:15,label:"连续错误N次后触发报警"},model:{value:t.data.max_error_num,callback:function(e){t.$set(t.data,"max_error_num",e)},expression:"data.max_error_num"}})],1),a("el-form-item",{attrs:{label:"报警沉默时间(分钟)"}},[a("el-input-number",{attrs:{min:0,max:3600,label:"连续错误N次后触发报警"},model:{value:t.data.silence_time,callback:function(e){t.$set(t.data,"silence_time",e)},expression:"data.silence_time"}})],1),a("el-form-item",{attrs:{label:"SSL证书报警天数"}},[a("el-input-number",{attrs:{min:0,max:30,label:"<=此天数将会触发报警"},model:{value:t.data.ssl_min_day,callback:function(e){t.$set(t.data,"ssl_min_day",e)},expression:"data.ssl_min_day"}})],1),a("el-form-item",{attrs:{label:"域名过期报警天数"}},[a("el-input-number",{attrs:{min:0,max:365,label:"<=此天数将会触发报警"},model:{value:t.data.host_expire_min_day,callback:function(e){t.$set(t.data,"host_expire_min_day",e)},expression:"data.host_expire_min_day"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},ot=[],rt={name:"setting",data:function(){return{Loading:!0,data:{server_jiang_token:"",max_error_num:3,silence_time:60,ssl_min_day:10,host_expire_min_day:30},rules:{name:[{required:!1,message:"请输入Server酱Token",trigger:"blur"}]}}},methods:{save:function(){var t=this;this.$refs["data"].validate((function(e){if(!e)return!1;var a=t;t.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/save",data:_.a.stringify(t.data)}).then((function(t){0!=t.data.code?(a.$notify.error({title:"错误",message:t.data.msg}),a.Loading=!1):(a.Loading=!1,a.$notify({title:"成功",message:"状态修改成功",type:"success"}))}))}))},load:function(){var t=this;this.Loading=!0,x()({method:"get",url:window.host+"/setting/info"}).then((function(e){t.data=e.data.res,t.Loading=!1}))},sendTest:function(){var t=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/send",data:_.a.stringify(this.data)}).then((function(e){t.Loading=!1,0==e.data.code?t.$notify({title:"成功",message:"发送成功",type:"success"}):t.$notify({title:"失败",message:e.data.msg,type:"error"})}))}},created:function(){this.load()}},lt=rt,ct=(a("7df6"),Object(p["a"])(lt,it,ot,!1,null,null,null)),dt=ct.exports;s["default"].component("tab-http",O),s["default"].component("tab-home",g),s["default"].component("tab-ssl",F),s["default"].component("tab-host_expire",nt),s["default"].component("tab-setting",dt);var ut={name:"navigation",props:{msg:String},data:function(){return{currentTab:"Home"}},computed:{currentTabComponent:function(){return"tab-"+this.currentTab.toLowerCase()}}},mt=ut,ft=(a("f90c"),Object(p["a"])(mt,l,c,!1,null,null,null)),pt=ft.exports,ht={name:"App",components:{navigation:pt}},gt=ht,vt=(a("034f"),Object(p["a"])(gt,o,r,!1,null,null,null)),bt=vt.exports;s["default"].use(i.a),new s["default"]({el:"#app",render:function(t){return t(bt)}})},"7df6":function(t,e,a){"use strict";a("251c")},"822d":function(t,e,a){},"85ec":function(t,e,a){},"8c02":function(t,e,a){"use strict";a("fe24")},"9cb8":function(t,e,a){},d42d:function(t,e,a){},d82a:function(t,e,a){"use strict";a("4490")},ee01:function(t,e,a){"use strict";a("3b60")},f635:function(t,e,a){"use strict";a("9cb8")},f90c:function(t,e,a){"use strict";a("d42d")},fe24:function(t,e,a){}});
//# sourceMappingURL=app.efb1f069.js.map