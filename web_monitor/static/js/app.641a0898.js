(function(t){function e(e){for(var s,r,o=e[0],l=e[1],d=e[2],u=0,p=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&p.push(i[r][0]),i[r]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(p.length)p.shift()();return n.push.apply(n,d||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(n.splice(e--,1),t=r(r.s=a[0]))}return t}var s={},i={app:0},n=[];function r(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=s,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)r.d(a,s,function(e){return t[e]}.bind(null,s));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var c=l;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"251c":function(t,e,a){},"26d6":function(t,e,a){"use strict";a("3184")},2941:function(t,e,a){"use strict";a("822d")},3184:function(t,e,a){},"3b60":function(t,e,a){},4490:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),i=a("5c96"),n=a.n(i),r=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navigation")],1)}),o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:3}},[a("div",{attrs:{id:"nav"}},[a("h4",[t._v("Web综合监测系统")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("监控类型")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(e){t.currentTab="http"}}},[t._v("可用性监控")]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(e){t.currentTab="ssl"}}},[t._v("SSL证书监控")]),a("el-menu-item",{attrs:{index:"1-3"},on:{click:function(e){t.currentTab="host_expire"}}},[t._v("域名到期监控")])],1)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("系统设置")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.currentTab="setting"}}},[t._v("基础设置")])],1)],2)],1)],1)]),a("el-col",{attrs:{span:21}},[a(t.currentTabComponent,{tag:"component",staticClass:"tab"})],1)],1)},d=[],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("h3",[t._v("hihi")])])}],p={name:"home",props:{msg:String},data:function(){return{}}},m=p,f=a("2877"),h=Object(f["a"])(m,c,u,!1,null,null,null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"http"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"请求类型"}},[a("el-select",{attrs:{placeholder:"GET/POST"},model:{value:t.addData.method,callback:function(e){t.$set(t.addData,"method",e)},expression:"addData.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}})],1)],1),a("el-form-item",{style:"POST"==t.addData.method?"":"display:none;",attrs:{label:"Post Data",prop:"data"}},[a("el-input",{attrs:{placeholder:"key=%E7%8B%97&type=json"},model:{value:t.addData.data,callback:function(e){t.$set(t.addData,"data",e)},expression:"addData.data"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com"},model:{value:t.addData.url,callback:function(e){t.$set(t.addData,"url",e)},expression:"addData.url"}})],1),a("el-form-item",{attrs:{label:"状态码",prop:"allow_http_code"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.addData.allow_http_code,callback:function(e){t.$set(t.addData,"allow_http_code",e)},expression:"addData.allow_http_code"}}),a("div",{staticClass:"tip"},[t._v(" 多个http状态码使用半角逗号隔开, 当返回http code包含设置值时, 则认为正常 ")])],1),a("el-form-item",{attrs:{label:"Header",prop:"header"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"Referer: http://localhost:8856/\nAccept-Language: zh-CN,zh;q=0.9\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36"},model:{value:t.addData.header,callback:function(e){t.$set(t.addData,"header",e)},expression:"addData.header"}})],1),a("el-form-item",{attrs:{label:"匹配文本"}},[a("el-input",{attrs:{placeholder:"匹配请求返回的文本内容"},model:{value:t.addData.find_str,callback:function(e){t.$set(t.addData,"find_str",e)},expression:"addData.find_str"}})],1),a("el-form-item",{style:""!=t.addData.find_str?"":"display:none;",attrs:{label:"匹配模式"}},[a("el-select",{attrs:{placeholder:"白名单"},model:{value:t.addData.find_str_type,callback:function(e){t.$set(t.addData,"find_str_type",e)},expression:"addData.find_str_type"}},[a("el-option",{attrs:{label:"白名单(必须包含匹配文本)",value:"0"}}),a("el-option",{attrs:{label:"黑名单(不能包含匹配文本)",value:"1"}})],1),a("div",{staticClass:"tip"},[t._v(" 白名单模式下, 如果返回文本不包含设置的匹配文本, 则失败; 黑名单模式下, 返回文本包含设置的匹配文本, 则失败 ")])],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.addData.rate,callback:function(e){t.$set(t.addData,"rate",e)},expression:"addData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("地址")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:8}},[a("div",[t._v("24小时可用性")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("频率")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("httpstatus",{key:t._id,attrs:{name:t.name,id:t._id,url:t.url,enable:t.enable,status24:t.status24,status24_success:t.status24_success,status24_fail:t.status24_fail,rate:t.rate,res:t,LastTime:t.ltime_str}})}))],2)},v=[],_=a("b85c"),y=(a("a15b"),a("d3b7"),a("25f0"),a("b0c0"),a("4328")),w=a.n(y),D=a("bc3a"),x=a.n(D),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"http_status",style:t.is_remove?"display: none":""},[a("el-dialog",{attrs:{title:"编辑监控",visible:t.editDialogVisible,width:"60%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editAll",attrs:{rules:t.rules,model:t.res,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:""},model:{value:t.res.name,callback:function(e){t.$set(t.res,"name",e)},expression:"res.name"}})],1),a("el-form-item",{attrs:{label:"请求类型"}},[a("el-select",{attrs:{placeholder:"GET/POST"},model:{value:t.res.method,callback:function(e){t.$set(t.res,"method",e)},expression:"res.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}})],1)],1),a("el-form-item",{style:"POST"==t.res.method?"":"display:none;",attrs:{label:"Post Data",prop:"data"}},[a("el-input",{attrs:{placeholder:"key=%E7%8B%97&type=json"},model:{value:t.res.data,callback:function(e){t.$set(t.res,"data",e)},expression:"res.data"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com",disabled:""},model:{value:t.res.url,callback:function(e){t.$set(t.res,"url",e)},expression:"res.url"}})],1),a("el-form-item",{attrs:{label:"状态码",prop:"allow_http_code"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.res.allow_http_code,callback:function(e){t.$set(t.res,"allow_http_code",e)},expression:"res.allow_http_code"}}),a("div",{staticClass:"tip"},[t._v(" 多个http状态码使用半角逗号隔开, 当返回http code包含设置值时, 则认为正常 ")])],1),a("el-form-item",{attrs:{label:"Header",prop:"header"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"Referer: http://localhost:8856/\nAccept-Language: zh-CN,zh;q=0.9\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36"},model:{value:t.res.header,callback:function(e){t.$set(t.res,"header",e)},expression:"res.header"}})],1),a("el-form-item",{attrs:{label:"匹配文本"}},[a("el-input",{attrs:{placeholder:"匹配请求返回的文本内容"},model:{value:t.res.find_str,callback:function(e){t.$set(t.res,"find_str",e)},expression:"res.find_str"}})],1),a("el-form-item",{style:""!=t.res.find_str?"":"display:none;",attrs:{label:"匹配模式"}},[a("el-select",{attrs:{placeholder:"白名单"},model:{value:t.res.find_str_type,callback:function(e){t.$set(t.res,"find_str_type",e)},expression:"res.find_str_type"}},[a("el-option",{attrs:{label:"白名单(必须包含匹配文本)",value:"0"}}),a("el-option",{attrs:{label:"黑名单(不能包含匹配文本)",value:"1"}})],1),a("div",{staticClass:"tip"},[t._v(" 白名单模式下, 如果返回文本不包含设置的匹配文本, 则失败; 黑名单模式下, 返回文本包含设置的匹配文本, 则失败 ")])],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.res.rate,callback:function(e){t.$set(t.res,"rate",e)},expression:"res.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.editMonitor}},[t._v("修改")]),a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"url-copy",attrs:{"data-clipboard-text":t.url},on:{click:t.copy}},[t._v(" "+t._s(t.url)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"24h"},[a("el-tooltip",{staticClass:"status-24h-msg",attrs:{placement:"bottom-end"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.status24_success)+" / "+t._s(t.status24_success+t.status24_fail)+" ")]),a("el-progress",{style:t.current24StatusTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.current24Status,status:t.current24StatusStr,format:t.format}})],1)],1)]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"rate"},[t._v(t._s(t.rate)+"分钟")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){t.editDialogVisible=!0}},slot:"reference"}),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},C=[],$=(a("a9e3"),a("b311")),L=a.n($),T={name:"http_status",props:{id:String,name:String,url:String,LastTime:String,enable:{type:Boolean,default:!1},status24:{type:Number,default:98},status24_fail:{type:Number,default:2},status24_success:{type:Number,default:100},rate:{type:Number,default:15},res:Object},data:function(){return{Loading:!1,is_remove:!1,currentEnable:this.enable,current24Status:this.status24,current24StatusStr:this.status24>=85?"success":this.status24>=25?"warning":"exception",current24StatusTextColor:this.status24>=30?"color: #fff;":"color: #000",rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}],allow_http_code:[{required:!0,message:"请输入正常的http code",trigger:"blur"},{pattern:/^\d*,{0,1}\d*$/,message:"http状态码格式不正确",trigger:"blur"}]},editDialogVisible:!1}},watch:{editDialogVisible:function(){window.pauseAutoRef=this.editDialogVisible}},methods:{editMonitor:function(){var t=this.res.header,e=this.res.data;this.res.header=window.btoa(this.res.header),this.res.data=window.btoa(this.res.data),this.res.id=this.id;var a=w.a.stringify(this.res);this.res.header=t,this.res.data=e;var s=this;this.$refs["editAll"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/edit_all",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):(s.$notify.success({title:"成功",message:"添加成功"}),s.editDialogVisible=!1)}))}))},copy:function(){var t=this,e=new L.a(".url-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.current24Status=this.status24,this.current24StatusStr=this.status24>=85?"success":this.status24>=25?"warning":"exception",this.current24StatusTextColor=this.status24>=30?"color: #fff;":"color: #000",this.current24Status+"% (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.is_remove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}}},S=T,R=(a("ee01"),Object(f["a"])(S,k,C,!1,null,null,null)),E=R.exports,O={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",url:"",rate:5,method:"GET",header:"",allow_http_code:"200",find_str_type:"0",find_str:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}],allow_http_code:[{required:!0,message:"请输入正常的http code",trigger:"blur"},{pattern:/^\d*,{0,1}\d*$/,message:"http状态码格式不正确",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{httpstatus:E},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/http_monitor/list"}).then((function(t){var a,s=[],i=Object(_["a"])(t.data.res.list);try{for(i.s();!(a=i.n()).done;){var n=a.value;if(console.log(n),n["allow_http_code"]=n.allow_http_code?n["allow_http_code"].join(","):"200",n["find_str_type"]=n.find_str_type?n["find_str_type"].toString():"0",n.header){n.header=JSON.parse(n.header);var r="";for(var o in n.header)r+=o+":"+n.header[o]+"\n";n.header=r,console.log(r)}s.push(n)}}catch(l){i.e(l)}finally{i.f()}e.list=s,e.Loading=!1}))},addMonitor:function(){var t=this.addData.header,e=this.addData.data;this.addData.header=window.btoa(this.addData.header),this.addData.data=window.btoa(this.addData.data);var a=w.a.stringify(this.addData);this.addData.header=t,this.addData.data=e;var s=this;this.$refs["addData"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/add",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):(s.$notify.success({title:"成功",message:"添加成功"}),s.addDialogVisible=!1,s.addData.name="",s.addData.url="",s.addData.header="",s.addData.data="",s.addData.find_str="",s.addData.find_str_type="0",s.addData.allow_http_code="200",s.loadMonitor())}))}))}}},M=O,V=(a("8c02"),Object(f["a"])(M,b,v,!1,null,null,null)),j=V.exports,N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"ssl"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")]),a("el-button",{attrs:{type:"warning"},on:{click:t.refAll}},[t._v("重新查询到期时间")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控host",prop:"host"}},[a("el-input",{attrs:{placeholder:"www.baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("sslstatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},P=[],q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"ssl_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(t._s(t.host))])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},A=[],I={name:"ssl_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/90*100>100?100:this.rstDay/90*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/90*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new L.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/90*100>100?100:this.rstDay/90*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/90*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:w.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},G=I,z=(a("d82a"),Object(f["a"])(G,q,A,!1,null,null,null)),H=z.exports,B={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控host",trigger:"blur"},{pattern:/^.+\..+/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{sslstatus:H},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/ssl_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/add",data:w.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.addData.name="",e.addData.host="",e.loadMonitor())}))}))},refAll:function(){this.Loading=!0;var t=this;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref_all"}).then((function(e){0!=e.data.code?(t.$notify.error({title:"错误",message:e.data.msg}),t.Loading=!1):(t.$notify.success({title:"成功",message:"全部重新查询完成"}),t.addDialogVisible=!1,t.loadMonitor())}))}}},K=B,U=(a("26d6"),Object(f["a"])(K,N,P,!1,null,null,null)),J=U.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"host_expire"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("span",{staticClass:"tip"},[t._v("只有到期时间小于等于设置的报警时间时, 才会在每天自动刷新过期时间")]),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控域名",prop:"host"}},[a("el-input",{attrs:{placeholder:"baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("hoststatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},X=[],F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"host_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(" "+t._s(t.host)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},Q=[],Y={name:"host_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/365*100>100?100:this.rstDay/365*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/365*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new L.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/365*100>100?100:this.rstDay/365*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/365*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:w.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},Z=Y,tt=(a("f635"),Object(f["a"])(Z,F,Q,!1,null,null,null)),et=tt.exports,at={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控域名",trigger:"blur"},{pattern:/^\w+\.\w+$/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{hoststatus:et},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/expire_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/add",data:w.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addData.name="",e.addData.host="",e.addDialogVisible=!1,e.loadMonitor())}))}))}}},st=at,it=(a("2941"),Object(f["a"])(st,W,X,!1,null,null,null)),nt=it.exports,rt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"setting"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],ref:"data",attrs:{"label-position":"top",rules:t.rules,model:t.data,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Server酱Token",prop:"server_jiang_token"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"配置Server酱Token即可接受报警信息"},model:{value:t.data.server_jiang_token,callback:function(e){t.$set(t.data,"server_jiang_token",e)},expression:"data.server_jiang_token"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.sendTest}},[t._v("测试")])],1)],1)],1),a("el-form-item",{attrs:{label:"HTTP可用性报警阈值(次)"}},[a("el-input-number",{attrs:{min:1,max:15,label:"连续错误N次后触发报警"},model:{value:t.data.max_error_num,callback:function(e){t.$set(t.data,"max_error_num",e)},expression:"data.max_error_num"}})],1),a("el-form-item",{attrs:{label:"报警沉默时间(分钟)"}},[a("el-input-number",{attrs:{min:0,max:3600,label:"连续错误N次后触发报警"},model:{value:t.data.silence_time,callback:function(e){t.$set(t.data,"silence_time",e)},expression:"data.silence_time"}})],1),a("el-form-item",{attrs:{label:"SSL证书报警天数"}},[a("el-input-number",{attrs:{min:0,max:30,label:"<=此天数将会触发报警"},model:{value:t.data.ssl_min_day,callback:function(e){t.$set(t.data,"ssl_min_day",e)},expression:"data.ssl_min_day"}})],1),a("el-form-item",{attrs:{label:"域名过期报警天数"}},[a("el-input-number",{attrs:{min:0,max:365,label:"<=此天数将会触发报警"},model:{value:t.data.host_expire_min_day,callback:function(e){t.$set(t.data,"host_expire_min_day",e)},expression:"data.host_expire_min_day"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},ot=[],lt={name:"setting",data:function(){return{Loading:!0,data:{server_jiang_token:"",max_error_num:3,silence_time:60,ssl_min_day:10,host_expire_min_day:30},rules:{name:[{required:!1,message:"请输入Server酱Token",trigger:"blur"}]}}},methods:{save:function(){var t=this;this.$refs["data"].validate((function(e){if(!e)return!1;var a=t;t.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/save",data:w.a.stringify(t.data)}).then((function(t){0!=t.data.code?(a.$notify.error({title:"错误",message:t.data.msg}),a.Loading=!1):(a.Loading=!1,a.$notify({title:"成功",message:"状态修改成功",type:"success"}))}))}))},load:function(){var t=this;this.Loading=!0,x()({method:"get",url:window.host+"/setting/info"}).then((function(e){t.data=e.data.res,t.Loading=!1}))},sendTest:function(){var t=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/send",data:w.a.stringify(this.data)}).then((function(e){t.Loading=!1,0==e.data.code?t.$notify({title:"成功",message:"发送成功",type:"success"}):t.$notify({title:"失败",message:e.data.msg,type:"error"})}))}},created:function(){this.load()}},dt=lt,ct=(a("7df6"),Object(f["a"])(dt,rt,ot,!1,null,null,null)),ut=ct.exports;s["default"].component("tab-http",j),s["default"].component("tab-home",g),s["default"].component("tab-ssl",J),s["default"].component("tab-host_expire",nt),s["default"].component("tab-setting",ut);var pt={name:"navigation",props:{msg:String},data:function(){return{currentTab:"Home"}},computed:{currentTabComponent:function(){return"tab-"+this.currentTab.toLowerCase()}}},mt=pt,ft=(a("f90c"),Object(f["a"])(mt,l,d,!1,null,null,null)),ht=ft.exports,gt={name:"App",components:{navigation:ht}},bt=gt,vt=(a("034f"),Object(f["a"])(bt,r,o,!1,null,null,null)),_t=vt.exports;s["default"].use(n.a),new s["default"]({el:"#app",render:function(t){return t(_t)}})},"7df6":function(t,e,a){"use strict";a("251c")},"822d":function(t,e,a){},"85ec":function(t,e,a){},"8c02":function(t,e,a){"use strict";a("fe24")},"9cb8":function(t,e,a){},d42d:function(t,e,a){},d82a:function(t,e,a){"use strict";a("4490")},ee01:function(t,e,a){"use strict";a("3b60")},f635:function(t,e,a){"use strict";a("9cb8")},f90c:function(t,e,a){"use strict";a("d42d")},fe24:function(t,e,a){}});
//# sourceMappingURL=app.641a0898.js.map