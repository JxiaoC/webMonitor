(function(t){function e(e){for(var n,s,l=e[0],o=e[1],u=e[2],d=0,p=[];d<l.length;d++)s=l[d],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(t[n]=o[n]);c&&c(e);while(p.length)p.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var c=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"251c":function(t,e,a){},"3b60":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,r,i=a("a026"),s=a("5c96"),l=a.n(s),o=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navigation")],1)}),u=[],c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:3}},[a("div",{attrs:{id:"nav"}},[a("h3",[t._v("web监控系统")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("监控类型")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(e){t.currentTab="http"}}},[t._v("网站监控")]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(e){t.currentTab="ssl"}}},[t._v("SSL证书监控")])],1)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("系统设置")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.currentTab="setting"}}},[t._v("基础设置")])],1)],2)],1)],1)]),a("el-col",{attrs:{span:21}},[a(t.currentTabComponent,{tag:"component",staticClass:"tab"})],1)],1)},d=[],p=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},m=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("h3",[t._v("hihi")])])}],f={name:"home",props:{msg:String},data:function(){return{}}},v=f,g=a("2877"),h=Object(g["a"])(v,p,m,!1,null,null,null),b=h.exports,_=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"http"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:2}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")])],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:20}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控url",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com"},model:{value:t.addData.url,callback:function(e){t.$set(t.addData,"url",e)},expression:"addData.url"}})],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.addData.rate,callback:function(e){t.$set(t.addData,"rate",e)},expression:"addData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("地址")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:8}},[a("div",[t._v("24小时可用性")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("频率")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("httpstatus",{key:t.status24,attrs:{name:t.name,id:t._id,url:t.url,enable:t.enable,status24:t.status24,rate:t.rate}})}))],2)},y=[],x=a("4328"),w=a.n(x),k=a("bc3a"),C=a.n(k),$="/",S={host:$},j=S,L=Object(g["a"])(j,n,r,!1,null,null,null),D=L.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"http_status",style:t.is_remove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("div",{staticClass:"name no-line"},[t._v(t._s(t.name))]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])]),a("el-col",{attrs:{span:6}},[a("div",{staticClass:"url"},[t._v(t._s(t.url))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"24h"},[a("el-progress",{attrs:{"text-inside":!0,"stroke-width":24,percentage:t.current24Status,status:t.current24StatusStr}})],1)]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"rate"},[t._v(t._s(t.rate)+"分钟")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(e){t.dialogVisible=!0}}})],1)])],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("span",[t._v("真的要删除监控吗")]),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"danger"},on:{click:t.remove}},[t._v("删 除")])],1)])],1)},T=[],E=(a("a9e3"),{name:"http_status",props:{id:String,name:String,url:String,enable:{type:Boolean,default:!1},status24:{type:Number,default:98},rate:{type:Number,default:15}},data:function(){return{Loading:!1,is_remove:!1,dialogVisible:!1,currentEnable:this.enable,current24Status:this.status24,current24StatusStr:this.status24>=85?"success":this.status24>=25?"warning":"exception"}},watch:{},methods:{remove:function(){this.dialogVisible=!1,this.is_remove=!0,C()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:D.host+"/http_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,C()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:D.host+"/http_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}}}),V=E,M=(a("ee01"),Object(g["a"])(V,O,T,!1,null,null,null)),N=M.exports,P={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",url:"",rate:1},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}]},addDialogVisible:!1,list:[]}},components:{httpstatus:N},created:function(){this.loadMonitor(!1);var t=this;setInterval((function(){t.autoRef&&(t.loadMonitor(!0),console.log("auto ref"))}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;C()({method:"get",url:D.host+"/http_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;C()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:D.host+"/http_monitor/add",data:w.a.stringify(t.addData)}).then((function(t){0!=t.data.code?e.$notify.error({title:"错误",message:t.data.msg}):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.loadMonitor())}))}))}}},q=P,R=(a("8c02"),Object(g["a"])(q,_,y,!1,null,null,null)),J=R.exports,A=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},B=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ssl"}},[a("h3",[t._v("hihi")])])}],H={name:"ssl",props:{msg:String},data:function(){return{}}},I=H,z=Object(g["a"])(I,A,B,!1,null,null,null),F=z.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"setting"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],ref:"data",attrs:{"label-position":"top",rules:t.rules,model:t.data,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Server酱Token",prop:"server_jiang_token"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"配置Server酱Token即可接受报警信息"},model:{value:t.data.server_jiang_token,callback:function(e){t.$set(t.data,"server_jiang_token",e)},expression:"data.server_jiang_token"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.sendTest}},[t._v("测试")])],1)],1)],1),a("el-form-item",{attrs:{label:"报警阈值(分钟)",prop:"max_error_num"}},[a("el-input-number",{attrs:{min:1,max:15,label:"连续错误N次后触发报警"},model:{value:t.data.max_error_num,callback:function(e){t.$set(t.data,"max_error_num",e)},expression:"data.max_error_num"}})],1),a("el-form-item",{attrs:{label:"报警沉默时间(分钟)",prop:"silence_time"}},[a("el-input-number",{attrs:{min:0,max:3600,label:"连续错误N次后触发报警"},model:{value:t.data.silence_time,callback:function(e){t.$set(t.data,"silence_time",e)},expression:"data.silence_time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},K=[],Q={name:"setting",data:function(){return{Loading:!0,data:{server_jiang_token:"",max_error_num:3,silence_time:60},rules:{name:[{required:!1,message:"请输入Server酱Token",trigger:"blur"}],max_error_num:[{required:!0,message:"报警阈值不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"必须为数字"}],silence_time:[{required:!0,message:"沉默时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"必须为数字"}]}}},methods:{save:function(){var t=this;this.$refs["data"].validate((function(e){if(!e)return!1;var a=t;t.Loading=!0,C()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:D.host+"/setting/save",data:w.a.stringify(t.data)}).then((function(){a.Loading=!1,a.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}))},load:function(){var t=this;this.Loading=!0,C()({method:"get",url:D.host+"/setting/info"}).then((function(e){t.data=e.data.res,t.Loading=!1}))},sendTest:function(){var t=this;this.Loading=!0,C()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:D.host+"/setting/send",data:w.a.stringify(this.data)}).then((function(e){t.Loading=!1,0==e.data.code?t.$notify({title:"成功",message:"发送成功",type:"success"}):t.$notify({title:"失败",message:e.data.msg,type:"error"})}))}},created:function(){this.load()}},U=Q,W=(a("7df6"),Object(g["a"])(U,G,K,!1,null,null,null)),X=W.exports;i["default"].component("tab-http",J),i["default"].component("tab-home",b),i["default"].component("tab-ssl",F),i["default"].component("tab-setting",X);var Y={name:"navigation",props:{msg:String},data:function(){return{currentTab:"Home"}},computed:{currentTabComponent:function(){return"tab-"+this.currentTab.toLowerCase()}}},Z=Y,tt=Object(g["a"])(Z,c,d,!1,null,null,null),et=tt.exports,at={name:"App",components:{navigation:et}},nt=at,rt=(a("034f"),Object(g["a"])(nt,o,u,!1,null,null,null)),it=rt.exports;i["default"].use(l.a),new i["default"]({el:"#app",render:function(t){return t(it)}})},"7df6":function(t,e,a){"use strict";a("251c")},"85ec":function(t,e,a){},"8c02":function(t,e,a){"use strict";a("fe24")},ee01:function(t,e,a){"use strict";a("3b60")},fe24:function(t,e,a){}});
//# sourceMappingURL=app.cf7b91a7.js.map