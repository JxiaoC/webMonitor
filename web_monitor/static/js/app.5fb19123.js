(function(t){function e(e){for(var s,n,o=e[0],l=e[1],d=e[2],u=0,p=[];u<o.length;u++)n=o[u],Object.prototype.hasOwnProperty.call(i,n)&&i[n]&&p.push(i[n][0]),i[n]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);c&&c(e);while(p.length)p.shift()();return r.push.apply(r,d||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},i={app:0},r=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var d=0;d<o.length;d++)e(o[d]);var c=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"251c":function(t,e,a){},"26d6":function(t,e,a){"use strict";a("3184")},2941:function(t,e,a){"use strict";a("822d")},3184:function(t,e,a){},"3b60":function(t,e,a){},4490:function(t,e,a){},"44ad2":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("a026"),i=a("5c96"),r=a.n(i),n=(a("0fae"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navigation")],1)}),o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-row",{staticClass:"tac"},[a("el-col",{attrs:{span:3}},[a("div",{attrs:{id:"nav"}},[a("h4",[t._v("Web综合监测系统")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"1"}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-menu"}),a("span",[t._v("监控类型")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"1-1"},on:{click:function(e){t.currentTab="http"}}},[t._v("可用性监控")]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:function(e){t.currentTab="server"}}},[t._v("服务器监控")]),a("el-menu-item",{attrs:{index:"1-3"},on:{click:function(e){t.currentTab="ssl"}}},[t._v("SSL证书监控")]),a("el-menu-item",{attrs:{index:"1-4"},on:{click:function(e){t.currentTab="host_expire"}}},[t._v("域名到期监控")])],1)],2),a("el-submenu",{attrs:{index:"2"}},[a("template",{slot:"title"},[a("i",{staticClass:"el-icon-setting"}),a("span",[t._v("系统设置")])]),a("el-menu-item-group",[a("el-menu-item",{attrs:{index:"2-1"},on:{click:function(e){t.currentTab="setting"}}},[t._v("基础设置")])],1)],2)],1)],1)]),a("el-col",{attrs:{span:21}},[a(t.currentTabComponent,{tag:"component",staticClass:"tab"})],1)],1)},d=[],c=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},u=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("h3",[t._v("hihi")])])}],p={name:"home",props:{msg:String},data:function(){return{}}},m=p,f=a("2877"),h=Object(f["a"])(m,c,u,!1,null,null,null),g=h.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"http"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"请求类型"}},[a("el-select",{attrs:{placeholder:"GET/POST"},model:{value:t.addData.method,callback:function(e){t.$set(t.addData,"method",e)},expression:"addData.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}})],1)],1),a("el-form-item",{style:"POST"==t.addData.method?"":"display:none;",attrs:{label:"Post Data",prop:"data"}},[a("el-input",{attrs:{placeholder:"key=%E7%8B%97&type=json"},model:{value:t.addData.data,callback:function(e){t.$set(t.addData,"data",e)},expression:"addData.data"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com"},model:{value:t.addData.url,callback:function(e){t.$set(t.addData,"url",e)},expression:"addData.url"}})],1),a("el-form-item",{attrs:{label:"状态码",prop:"allow_http_code"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.addData.allow_http_code,callback:function(e){t.$set(t.addData,"allow_http_code",e)},expression:"addData.allow_http_code"}}),a("div",{staticClass:"tip"},[t._v(" 多个http状态码使用半角逗号隔开, 当返回http code包含设置值时, 则认为正常 ")])],1),a("el-form-item",{attrs:{label:"Header",prop:"header"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"Referer: http://localhost:8856/\nAccept-Language: zh-CN,zh;q=0.9\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36"},model:{value:t.addData.header,callback:function(e){t.$set(t.addData,"header",e)},expression:"addData.header"}})],1),a("el-form-item",{attrs:{label:"匹配文本"}},[a("el-input",{attrs:{placeholder:"匹配请求返回的文本内容"},model:{value:t.addData.find_str,callback:function(e){t.$set(t.addData,"find_str",e)},expression:"addData.find_str"}})],1),a("el-form-item",{style:""!=t.addData.find_str?"":"display:none;",attrs:{label:"匹配模式"}},[a("el-select",{attrs:{placeholder:"白名单"},model:{value:t.addData.find_str_type,callback:function(e){t.$set(t.addData,"find_str_type",e)},expression:"addData.find_str_type"}},[a("el-option",{attrs:{label:"白名单(必须包含匹配文本)",value:"0"}}),a("el-option",{attrs:{label:"黑名单(不能包含匹配文本)",value:"1"}})],1),a("div",{staticClass:"tip"},[t._v(" 白名单模式下, 如果返回文本不包含设置的匹配文本, 则失败; 黑名单模式下, 返回文本包含设置的匹配文本, 则失败 ")])],1),a("el-form-item",{attrs:{label:"回调地址"}},[a("el-row",[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"回调地址"},model:{value:t.addData.callback_url,callback:function(e){t.$set(t.addData,"callback_url",e)},expression:"addData.callback_url"}})],1),a("el-col",{staticStyle:{padding:"0 0 0 1%"},attrs:{span:5}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:function(e){return t.callbackTest("success")}}},[t._v("模拟可用性恢复")])],1),a("el-col",{staticStyle:{padding:"0 0 0 1%"},attrs:{span:5}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:function(e){return t.callbackTest("fail")}}},[t._v("模拟可用性报错")])],1)],1),a("div",{staticClass:"tip",staticStyle:{"line-height":"20px","margin-top":"10px"}},[t._v(" 将会往指定URL POST数据,具体POST内容为status(报错状态: fail(报错), success(恢复))"),a("br"),t._v(' 回调地址需要返回"ok"字符串以表示正确收到回调, 否则将会间隔1分钟, 连续请求直到超过3次或者正常返回"ok"字符串为止 ')])],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.addData.rate,callback:function(e){t.$set(t.addData,"rate",e)},expression:"addData.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{attrs:{type:"success",loading:t.testMonitoring},on:{click:t.testMonitor}},[t._v("模拟")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("地址")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:8}},[a("div",[t._v("24小时可用性")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("频率")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("httpstatus",{key:t._id,attrs:{name:t.name,id:t._id,url:t.url,enable:t.enable,status24:t.status24,status24_list:t.status24_list,rate:t.rate,res:t,LastTime:t.ltime_str}})}))],2)},v=[],_=a("b85c"),y=(a("a15b"),a("d3b7"),a("25f0"),a("b0c0"),a("4328")),w=a.n(y),D=a("bc3a"),x=a.n(D),k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"http_status",style:t.is_remove?"display: none":""},[a("el-dialog",{attrs:{title:"编辑监控",visible:t.editDialogVisible,width:"60%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editAll",attrs:{rules:t.rules,model:t.res,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:""},model:{value:t.res.name,callback:function(e){t.$set(t.res,"name",e)},expression:"res.name"}})],1),a("el-form-item",{attrs:{label:"请求类型"}},[a("el-select",{attrs:{placeholder:"GET/POST"},model:{value:t.res.method,callback:function(e){t.$set(t.res,"method",e)},expression:"res.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}})],1)],1),a("el-form-item",{style:"POST"==t.res.method?"":"display:none;",attrs:{label:"Post Data",prop:"data"}},[a("el-input",{attrs:{placeholder:"key=%E7%8B%97&type=json"},model:{value:t.res.data,callback:function(e){t.$set(t.res,"data",e)},expression:"res.data"}})],1),a("el-form-item",{attrs:{label:"URL",prop:"url"}},[a("el-input",{attrs:{placeholder:"https://www.baidu.com",disabled:""},model:{value:t.res.url,callback:function(e){t.$set(t.res,"url",e)},expression:"res.url"}})],1),a("el-form-item",{attrs:{label:"状态码",prop:"allow_http_code"}},[a("el-input",{attrs:{placeholder:""},model:{value:t.res.allow_http_code,callback:function(e){t.$set(t.res,"allow_http_code",e)},expression:"res.allow_http_code"}}),a("div",{staticClass:"tip"},[t._v(" 多个http状态码使用半角逗号隔开, 当返回http code包含设置值时, 则认为正常 ")])],1),a("el-form-item",{attrs:{label:"Header",prop:"header"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"Referer: http://localhost:8856/\nAccept-Language: zh-CN,zh;q=0.9\nUser-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/96.0.4664.110 Safari/537.36"},model:{value:t.res.header,callback:function(e){t.$set(t.res,"header",e)},expression:"res.header"}})],1),a("el-form-item",{attrs:{label:"匹配文本"}},[a("el-input",{attrs:{placeholder:"匹配请求返回的文本内容"},model:{value:t.res.find_str,callback:function(e){t.$set(t.res,"find_str",e)},expression:"res.find_str"}})],1),a("el-form-item",{style:""!=t.res.find_str?"":"display:none;",attrs:{label:"匹配模式"}},[a("el-select",{attrs:{placeholder:"白名单"},model:{value:t.res.find_str_type,callback:function(e){t.$set(t.res,"find_str_type",e)},expression:"res.find_str_type"}},[a("el-option",{attrs:{label:"白名单(必须包含匹配文本)",value:"0"}}),a("el-option",{attrs:{label:"黑名单(不能包含匹配文本)",value:"1"}})],1),a("div",{staticClass:"tip"},[t._v(" 白名单模式下, 如果返回文本不包含设置的匹配文本, 则失败; 黑名单模式下, 返回文本包含设置的匹配文本, 则失败 ")])],1),a("el-form-item",{attrs:{label:"回调地址"}},[a("el-row",[a("el-col",{attrs:{span:14}},[a("el-input",{attrs:{placeholder:"回调地址"},model:{value:t.res.callback_url,callback:function(e){t.$set(t.res,"callback_url",e)},expression:"res.callback_url"}})],1),a("el-col",{staticStyle:{padding:"0 0 0 1%"},attrs:{span:5}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"success"},on:{click:function(e){return t.callbackTest("success")}}},[t._v("模拟可用性恢复")])],1),a("el-col",{staticStyle:{padding:"0 0 0 1%"},attrs:{span:5}},[a("el-button",{staticStyle:{width:"100%"},attrs:{type:"danger"},on:{click:function(e){return t.callbackTest("fail")}}},[t._v("模拟可用性报错")])],1)],1),a("div",{staticClass:"tip",staticStyle:{"line-height":"20px","margin-top":"10px"}},[t._v(" 将会往指定URL POST数据,具体POST内容为status(报错状态: fail(报错), success(恢复))"),a("br"),t._v(' 回调地址需要返回"ok"字符串以表示正确收到回调, 否则将会间隔1分钟, 连续请求直到超过3次或者正常返回"ok"字符串为止 ')])],1),a("el-form-item",{attrs:{label:"监控频率",prop:"rate"}},[a("el-input-number",{attrs:{min:1,max:60,label:"单位为分钟"},model:{value:t.res.rate,callback:function(e){t.$set(t.res,"rate",e)},expression:"res.rate"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.editMonitor}},[t._v("修改")]),a("el-button",{attrs:{type:"success",loading:t.testMonitoring},on:{click:t.testMonitor}},[t._v("模拟")]),a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"url-copy",attrs:{"data-clipboard-text":t.url},on:{click:t.copy}},[t._v(" "+t._s(t.url)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:8}},[a("div",{staticClass:"24h"},[a("div",{staticClass:"box_24h"},t._l(t.status24_list,(function(e){return a("el-tooltip",{key:e.id,class:e.normal?"status-24h-msg":"warning status-24h-msg",style:e.normal?e.delay>5e3?"background-color: rgb(255 193 140)":e.delay>3e3?"background-color: rgb(255 177 0)":e.delay>1e3?"background-color: rgb(255 235 0)":e.delay>500?"background-color: rgb(228 255 0)":e.delay>300?"background-color: rgb(157 255 0)":"background-color: rgb(16 206 102)":"background-color: rgb(255, 0, 0)",attrs:{placement:"bottom-end"}},[a("div",{attrs:{slot:"content"},slot:"content"},[t._v(" ["+t._s(t._f("formatDate")(e.atime))+"] "),a("br"),t._v(" http code: "+t._s(e.http_code)+" "),a("br"),t._v(" delay: "+t._s(e.delay)+"ms "),a("br"),t._v(" normal: "+t._s(e.normal)+" "),a("br"),t._v(" 24h usability: "+t._s(t.status24)+"% "),a("br"),t._v(" "+t._s(e.err_data?"err_data: "+e.err_data:"")+" ")]),a("div",{staticClass:"progress"},[t._v("0")])])})),1)])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"rate"},[t._v(t._s(t.rate)+"分钟")])]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){t.editDialogVisible=!0}},slot:"reference"}),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},$=[],C=(a("a9e3"),a("b311")),S=a.n(C);a("ac1f"),a("00b4"),a("5319"),a("4d63"),a("c607"),a("2c3e"),a("b680");function T(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var s in a)if(new RegExp("(".concat(s,")")).test(e)){var i=a[s]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?i:R(i))}return e}function L(t){var e="";e=t<102.4?t.toFixed(2)+"B":t<104857.6?(t/1024).toFixed(2)+"KB":t<107374182.4?(t/1048576).toFixed(2)+"MB":(t/1073741824).toFixed(2)+"GB";var a=e+"",s=a.indexOf("."),i=a.substr(s+1,2);return"00"==i?a.substring(0,s)+a.substr(s+3,2):e}function R(t){return("00"+t).substr(t.length)}var M={name:"http_status",props:{id:String,name:String,url:String,LastTime:String,enable:{type:Boolean,default:!1},status24:{type:Number,default:99},status24_list:{type:Array,default:null},rate:{type:Number,default:15},res:Object},filters:{formatDate:function(t){t*=1e3;var e=new Date(t);return T(e,"yyyy-MM-dd hh:mm")}},data:function(){return{Loading:!1,is_remove:!1,currentEnable:this.enable,current24Status:this.status24,current24StatusStr:this.status24>=85?"success":this.status24>=25?"warning":"exception",current24StatusTextColor:this.status24>=30?"color: #fff;":"color: #000",rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}],allow_http_code:[{required:!0,message:"请输入正常的http code",trigger:"blur"},{pattern:/^\d*,{0,1}\d*$/,message:"http状态码格式不正确",trigger:"blur"}]},editDialogVisible:!1}},watch:{editDialogVisible:function(){window.pauseAutoRef=this.editDialogVisible}},methods:{editMonitor:function(){var t=this.res.header,e=this.res.data;this.res.header=window.btoa(this.res.header),this.res.data=window.btoa(this.res.data),this.res.id=this.id;var a=w.a.stringify(this.res);this.res.header=t,this.res.data=e;var s=this;this.$refs["editAll"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/edit_all",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):(s.$notify.success({title:"成功",message:"添加成功"}),s.editDialogVisible=!1)}))}))},testMonitor:function(){var t=this.res.header,e=this.res.data;this.res.header=window.btoa(this.res.header),this.res.data=window.btoa(this.res.data),this.res.id=this.id;var a=w.a.stringify(this.res);this.res.header=t,this.res.data=e;var s=this;this.$refs["editAll"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/test",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):s.$notify.success({title:"成功",message:t.data.msg})}))}))},callbackTest:function(t){if(this.res.callback_url){var e="status="+t+"&callback_url="+this.res.callback_url,a=this;a.$msgbox({dangerouslyUseHTMLString:!0,title:"模拟请求",message:"即将发起模拟请求, 具体请求参数如下:<br/> Url: "+a.res.callback_url+"<br/>Method: POST<br/>Data: status="+t,beforeClose:function(t,s,i){s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/callback_test",data:e}).then((function(t){i(),s.confirmButtonLoading=!1,0!=t.data.code?a.$notify.error({title:"模拟发生了错误",message:t.data.msg}):a.$notify.success({title:"成功",message:"模拟成功"})}))}})}else this.$alert("请输入回调url")},copy:function(){var t=this,e=new S.a(".url-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.current24Status=this.status24,this.current24StatusStr=this.status24>=85?"success":this.status24>=25?"warning":"exception",this.current24StatusTextColor=this.status24>=30?"color: #fff;":"color: #000",this.current24Status+"% (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.is_remove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}}},E=M,O=(a("ee01"),Object(f["a"])(E,k,$,!1,null,null,null)),V=O.exports,j={name:"http",props:{msg:String},data:function(){return{testMonitoring:!1,autoRef:!0,Loading:!0,addData:{name:"",url:"",rate:5,data:"",method:"GET",header:"",allow_http_code:"200",find_str_type:"0",find_str:"",callback_url:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],url:[{required:!0,message:"请输入监控url",trigger:"blur"},{pattern:/^((https|http|ftp|rtsp|mms)?:\/\/)[^\s]+/,message:"url格式不对",trigger:"blur"}],rate:[{required:!0,message:"间隔时间不能为空",trigger:"blur"},{pattern:/^\d+$/,message:"间隔必须为数字"}],allow_http_code:[{required:!0,message:"请输入正常的http code",trigger:"blur"},{pattern:/^\d*,{0,1}\d*$/,message:"http状态码格式不正确",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{httpstatus:V},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),6e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/http_monitor/list"}).then((function(t){var a,s=[],i=Object(_["a"])(t.data.res.list);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(r["allow_http_code"]=r.allow_http_code?r["allow_http_code"].join(","):"200",r["find_str_type"]=r.find_str_type?r["find_str_type"].toString():"0",r.header){r.header=JSON.parse(r.header);var n="";for(var o in r.header)n+=o+":"+r.header[o]+"\n";r.header=n}s.push(r)}}catch(l){i.e(l)}finally{i.f()}e.list=s,e.Loading=!1}))},addMonitor:function(){var t=this.addData.header,e=this.addData.data;this.addData.header=window.btoa(this.addData.header),this.addData.data=window.btoa(this.addData.data);var a=w.a.stringify(this.addData);this.addData.header=t,this.addData.data=e;var s=this;this.$refs["addData"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/add",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):(s.$notify.success({title:"成功",message:"添加成功"}),s.addDialogVisible=!1,s.addData.name="",s.addData.url="",s.addData.header="",s.addData.data="",s.addData.find_str="",s.addData.find_str_type="0",s.addData.allow_http_code="200",s.addData.callback_url="",s.loadMonitor())}))}))},testMonitor:function(){var t=this.addData.header,e=this.addData.data;this.addData.header=window.btoa(this.addData.header),this.addData.data=window.btoa(this.addData.data);var a=w.a.stringify(this.addData);this.addData.header=t,this.addData.data=e;var s=this;this.$refs["addData"].validate((function(t){if(!t)return!1;s.testMonitoring=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/test",data:a}).then((function(t){0!=t.data.code?s.$notify.error({title:"错误",message:t.data.msg}):s.$notify.success({title:"成功",message:t.data.msg}),s.testMonitoring=!1}))}))},callbackTest:function(t){if(this.addData.callback_url){var e="status="+t+"&callback_url="+this.addData.callback_url,a=this;a.$msgbox({dangerouslyUseHTMLString:!0,title:"模拟请求",message:"即将发起模拟请求, 具体请求参数如下:<br/> Url: "+a.addData.callback_url+"<br/>Method: POST<br/>Data: status="+t,beforeClose:function(t,s,i){s.confirmButtonLoading=!0,s.confirmButtonText="执行中...",x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/http_monitor/callback_test",data:e}).then((function(t){i(),s.confirmButtonLoading=!1,0!=t.data.code?a.$notify.error({title:"模拟发生了错误",message:t.data.msg}):a.$notify.success({title:"成功",message:"模拟成功"})}))}})}else this.$alert("请输入回调url")}}},P=j,N=(a("8c02"),Object(f["a"])(P,b,v,!1,null,null,null)),A=N.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"server"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"服务器ip",prop:"ip"}},[a("el-input",{attrs:{placeholder:"请输入ip地址"},model:{value:t.addData.ip,callback:function(e){t.$set(t.addData,"ip",e)},expression:"addData.ip"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.addData.desc,callback:function(e){t.$set(t.addData,"desc",e)},expression:"addData.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("IP地址")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("CPU")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("内存")])]),a("el-col",{attrs:{span:5}},[a("div",[t._v("硬盘")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("本月流出流量")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("上报时间")])]),a("el-col",{attrs:{span:2}},[a("div",[t._v("备注")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("serverstatus",{key:t._id,attrs:{name:t.name,id:t._id,ip:t.ip,desc:t.desc,cpu_use:t.cpu.use,cpu_siblings:t.cpu.siblings,load:t.load,memory:t.memory,disk:t.disk,network:t.network,atime:t.atime,utime:t.utime,res:t}})}))],2)},q=[],B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"server_status",style:t.is_remove?"display: none":""},[a("el-dialog",{attrs:{title:"编辑监控",visible:t.editDialogVisible,width:"60%"},on:{"update:visible":function(e){t.editDialogVisible=e}}},[a("el-form",{ref:"editAll",attrs:{rules:t.rules,model:t.res,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.res.name,callback:function(e){t.$set(t.res,"name",e)},expression:"res.name"}})],1),a("el-form-item",{attrs:{label:"服务器ip",prop:"ip"}},[a("el-input",{attrs:{placeholder:"请输入ip地址",disabled:""},model:{value:t.res.ip,callback:function(e){t.$set(t.res,"ip",e)},expression:"res.ip"}})],1),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"备注"},model:{value:t.res.desc,callback:function(e){t.$set(t.res,"desc",e)},expression:"res.desc"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.editMonitor}},[t._v("修改")]),a("el-button",{on:{click:function(e){t.editDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"url-copy",attrs:{"data-clipboard-text":t.ip},on:{click:t.copy}},[t._v(" "+t._s(t.ip)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",[t._v(t._s(t.cpu_use)+"% ("+t._s(t.cpu_siblings)+"H)")]),a("div",[t._v(t._s(t.load["load_1"])+", "+t._s(t.load["load_5"])+", "+t._s(t.load["load_15"]))])]),a("el-col",{attrs:{span:3}},[a("div",[t._v(t._s(t._f("formatSize")(t.memory["value"]))+" / "+t._s(t._f("formatSize")(t.memory["total_value"])))]),a("div",[t._v("("+t._s(parseFloat(t.memory["value"]/t.memory["total_value"]*100).toFixed(2))+"%)")])]),a("el-col",{attrs:{span:5}},t._l(t.disk,(function(e){return a("div",{key:e.name},[t._v(" "+t._s(t._f("formatSize")(e.value))+"/"+t._s(t._f("formatSize")(e.total_value))+"("+t._s(parseFloat(e.value/e.total_value*100).toFixed(2))+"%) - "+t._s(e.name)+" ")])})),0),a("el-col",{attrs:{span:2}},[a("div",[t._v(t._s(t._f("formatSize")(t.network)))])]),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"utime"},[t._v(t._s(t._f("formatDate")(t.utime)))])]),a("el-col",{attrs:{span:2}},[a("el-tooltip",{staticClass:"desc",attrs:{placement:"bottom-start",content:t.desc}},[a("div",[t._v(t._s(t.desc))])])],1),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{slot:"reference",type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){t.editDialogVisible=!0}},slot:"reference"}),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},z=[],G={name:"server_status",props:{id:String,name:String,ip:String,desc:String,cpu_use:Number,cpu_siblings:Number,load:Object,memory:Object,network:Number,disk:Array,atime:Number,utime:Number,res:Object},filters:{formatDate:function(t){t*=1e3;var e=new Date(t);return T(e,"yyyy-MM-dd hh:mm")},formatSize:function(t){return L(t)}},data:function(){return{Loading:!1,is_remove:!1,currentName:this.name,currentIP:this.ip,currentDesc:this.desc,rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],ip:[{required:!0,message:"请输入ip地址",trigger:"blur"},{pattern:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,message:"ip格式不对",trigger:"blur"}]},editDialogVisible:!1}},watch:{editDialogVisible:function(){window.pauseAutoRef=this.editDialogVisible}},methods:{editMonitor:function(){var t=this.res.header,e=this.res.data;this.res.header=window.btoa(this.res.header),this.res.data=window.btoa(this.res.data),this.res.id=this.id;var a=w.a.stringify(this.res);this.res.header=t,this.res.data=e;var s=this;this.$refs["editAll"].validate((function(t){if(!t)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/server_monitor/edit",data:a}).then((function(t){0!=t.data.code?(s.$notify.error({title:"错误",message:t.data.msg}),s.Loading=!1):(s.$notify.success({title:"成功",message:"添加成功"}),s.editDialogVisible=!1)}))}))},copy:function(){var t=this,e=new S.a(".url-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.current24Status=this.status24,this.current24StatusStr=this.status24>=85?"success":this.status24>=25?"warning":"exception",this.current24StatusTextColor=this.status24>=30?"color: #fff;":"color: #000",this.current24Status+"% (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.is_remove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/server_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/server_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))}}},U=G,H=(a("e73d"),Object(f["a"])(U,B,z,!1,null,null,null)),F=H.exports,K={name:"http",props:{msg:String},data:function(){return{testMonitoring:!1,autoRef:!0,Loading:!0,addData:{name:"",url:"",rate:5,data:"",method:"GET",header:"",allow_http_code:"200",find_str_type:"0",find_str:"",callback_url:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],ip:[{required:!0,message:"请输入ip地址",trigger:"blur"},{pattern:/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,message:"ip格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{serverstatus:F},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),6e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/server_monitor/list"}).then((function(t){var a,s=[],i=Object(_["a"])(t.data.res.list);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(r["allow_http_code"]=r.allow_http_code?r["allow_http_code"].join(","):"200",r["find_str_type"]=r.find_str_type?r["find_str_type"].toString():"0",r.header){r.header=JSON.parse(r.header);var n="";for(var o in r.header)n+=o+":"+r.header[o]+"\n";r.header=n}s.push(r)}}catch(l){i.e(l)}finally{i.f()}e.list=s,e.Loading=!1}))},addMonitor:function(){var t=w.a.stringify(this.addData),e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/server_monitor/add",data:t}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),e.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.addData.name="",e.addData.ip="",e.addData.desc="",e.loadMonitor())}))}))}}},J=K,W=(a("9950"),Object(f["a"])(J,I,q,!1,null,null,null)),X=W.exports,Y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"ssl"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")]),a("el-button",{attrs:{type:"warning"},on:{click:t.refAll}},[t._v("重新查询到期时间")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控host",prop:"host"}},[a("el-input",{attrs:{placeholder:"www.baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("sslstatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},Q=[],Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"ssl_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(t._s(t.host))])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},tt=[],et={name:"ssl_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/90*100>100?100:this.rstDay/90*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/90*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new S.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentEnable=this.enable,this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/90*100>100?100:this.rstDay/90*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/90*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:w.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},at=et,st=(a("d82a"),Object(f["a"])(at,Z,tt,!1,null,null,null)),it=st.exports,rt={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控host",trigger:"blur"},{pattern:/^.+\..+/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{sslstatus:it},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/ssl_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/add",data:w.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addDialogVisible=!1,e.addData.name="",e.addData.host="",e.loadMonitor())}))}))},refAll:function(){this.Loading=!0;var t=this;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/ssl_monitor/ref_all"}).then((function(e){0!=e.data.code?(t.$notify.error({title:"错误",message:e.data.msg}),t.Loading=!1):(t.$notify.success({title:"成功",message:"全部重新查询完成"}),t.addDialogVisible=!1,t.loadMonitor())}))}}},nt=rt,ot=(a("26d6"),Object(f["a"])(nt,Y,Q,!1,null,null,null)),lt=ot.exports,dt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.Loading,expression:"Loading",modifiers:{lock:!0}}],attrs:{id:"host_expire"}},[a("el-row",{staticClass:"menu",attrs:{type:"flex",gutter:20,align:"middle"}},[a("el-col",{attrs:{span:10}},[a("el-button",{staticClass:"add",attrs:{type:"primary"},on:{click:function(e){t.addDialogVisible=!0}}},[t._v("添加监控")]),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.loadMonitor(!1)}}},[t._v("刷新")])],1),a("el-col",{staticClass:"auto-ref",attrs:{span:14}},[a("el-switch",{attrs:{"active-text":"自动刷新","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.autoRef,callback:function(e){t.autoRef=e},expression:"autoRef"}})],1)],1),a("span",{staticClass:"tip"},[t._v("只有到期时间小于等于设置的报警时间时, 才会在每天自动刷新过期时间")]),a("el-dialog",{attrs:{title:"添加监控",visible:t.addDialogVisible,width:"60%"},on:{"update:visible":function(e){t.addDialogVisible=e}}},[a("el-form",{ref:"addData",attrs:{rules:t.rules,model:t.addData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"监控名称",prop:"name"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.addData.name,callback:function(e){t.$set(t.addData,"name",e)},expression:"addData.name"}})],1),a("el-form-item",{attrs:{label:"监控域名",prop:"host"}},[a("el-input",{attrs:{placeholder:"baidu.com"},model:{value:t.addData.host,callback:function(e){t.$set(t.addData,"host",e)},expression:"addData.host"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.addMonitor}},[t._v("立即创建")]),a("el-button",{on:{click:function(e){t.addDialogVisible=!1}}},[t._v("取消")])],1)],1)],1),a("el-row",{staticClass:"header"},[a("el-col",{attrs:{span:3}},[a("div",[t._v("监控名称")])]),a("el-col",{attrs:{span:6}},[a("div",[t._v("域名")])]),a("el-col",{staticClass:"status",attrs:{span:2}},[a("div",[t._v("状态")])]),a("el-col",{attrs:{span:10}},[a("div",[t._v("剩余天数")])]),a("el-col",{attrs:{span:3}},[a("div",[t._v("管理")])])],1),t._l(t.list,(function(t){return a("hoststatus",{key:t._id,attrs:{name:t.name,id:t._id,host:t.host,enable:t.enable,rstDay:t.rst_day,LastTime:t.ltime_str}})}))],2)},ct=[],ut=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],staticClass:"host_status",style:t.isRemove?"display: none":""},[a("el-row",{staticClass:"name-id",attrs:{align:"middle",type:"flex"}},[a("el-col",{attrs:{span:3}},[a("el-tooltip",{staticClass:"name",attrs:{placement:"bottom-start",content:t.name}},[a("div",[t._v(t._s(t.name))])]),a("div",{staticClass:"id no-line"},[t._v(t._s(t.id))])],1),a("el-col",{attrs:{span:6}},[a("el-tooltip",{staticClass:"url",attrs:{placement:"bottom",content:"点击复制"}},[a("div",{staticClass:"host-copy",attrs:{"data-clipboard-text":t.host},on:{click:t.copy}},[t._v(" "+t._s(t.host)+" ")])])],1),a("el-col",{attrs:{span:2}},[a("div",{staticClass:"status"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},nativeOn:{click:function(e){return t.switchEnable(t.currentEnable)}},model:{value:t.currentEnable,callback:function(e){t.currentEnable=e},expression:"currentEnable"}})],1)]),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"24h"},[a("el-progress",{style:t.currentRstDayTextColor,attrs:{"text-inside":!0,"stroke-width":24,percentage:t.currentRstDayRate,status:t.currentRstDayStr,format:t.format}})],1)]),a("el-col",{attrs:{span:3}},[a("div",{staticClass:"setting"},[a("el-tooltip",{attrs:{placement:"bottom",content:"刷新剩余天数"}},[a("el-button",{staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"el-icon-refresh",circle:""},on:{click:t.ref}})],1),a("el-popconfirm",{attrs:{"confirm-button-type":"danger","confirm-button-text":"好的","cancel-button-text":"不用了",icon:"el-icon-delete","icon-color":"red",title:"确定删除吗?"},on:{confirm:t.remove}},[a("el-button",{attrs:{slot:"reference",type:"danger",icon:"el-icon-delete",circle:""},slot:"reference"})],1)],1)])],1)],1)},pt=[],mt={name:"host_status",props:{id:String,name:String,host:String,LastTime:String,enable:{type:Boolean,default:!1},rstDay:{type:Number,default:98}},data:function(){return{Loading:!1,isRemove:!1,currentEnable:this.enable,currentRstDay:this.rstDay,currentRstDayRate:this.rstDay/365*100>100?100:this.rstDay/365*100,currentRstDayStr:this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",currentRstDayTextColor:this.rstDay/365*100>=40?"color: #fff;":"color: #000"}},watch:{},methods:{copy:function(){var t=this,e=new S.a(".host-copy");e.on("success",(function(){t.$notify.success({title:"成功",message:"复制成功"}),e.destroy()})),e.on("error",(function(){t.$notify.error({title:"失败",message:"该浏览器不支持自动复制"}),e.destroy()}))},format:function(){return this.currentRstDay=this.rstDay,this.currentRstDayRate=this.rstDay/365*100>100?100:this.rstDay/365*100,this.currentRstDayStr=this.rstDay>=30?"success":this.rstDay>=10?"warning":"exception",this.currentRstDayTextColor=this.rstDay/365*100>=40?"color: #fff;":"color: #000",this.rstDay+"天 (最后更新:"+this.LastTime+")"},remove:function(){this.dialogVisible=!1,this.isRemove=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/remove",data:w.a.stringify({id:this.id})}).then((function(){}))},switchEnable:function(t){var e=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/edit",data:w.a.stringify({id:this.id,key:"enable",value:t})}).then((function(){e.Loading=!1,e.$notify({title:"成功",message:"状态修改成功",type:"success"})}))},ref:function(){this.Loading=!0;var t=this;x()({method:"post",data:w.a.stringify({id:this.id}),headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/ref"}).then((function(e){0!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.$notify.success({title:"成功",message:t.name+" 刷新成功"}),t.rstDay=e.data.res,t.addDialogVisible=!1),t.Loading=!1}))}}},ft=mt,ht=(a("f635"),Object(f["a"])(ft,ut,pt,!1,null,null,null)),gt=ht.exports,bt={name:"http",props:{msg:String},data:function(){return{autoRef:!0,Loading:!0,addData:{name:"",host:""},rules:{name:[{required:!0,message:"请输入监控名称",trigger:"blur"}],host:[{required:!0,message:"请输入监控域名",trigger:"blur"},{pattern:/^\w+\.\w+$/,message:"host格式不对",trigger:"blur"}]},addDialogVisible:!1,list:[]}},components:{hoststatus:gt},created:function(){this.loadMonitor(!1);var t=this;clearInterval(window.setI),window.setI=setInterval((function(){t.autoRef&&!window.pauseAutoRef&&t.loadMonitor(!0)}),1e4)},methods:{loadMonitor:function(t){t||(this.Loading=!0);var e=this;x()({method:"get",url:window.host+"/expire_monitor/list"}).then((function(t){e.list=t.data.res.list,e.Loading=!1}))},addMonitor:function(){var t=this,e=this;this.$refs["addData"].validate((function(a){if(!a)return!1;x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/expire_monitor/add",data:w.a.stringify(t.addData)}).then((function(t){0!=t.data.code?(e.$notify.error({title:"错误",message:t.data.msg}),this.Loading=!1):(e.$notify.success({title:"成功",message:"添加成功"}),e.addData.name="",e.addData.host="",e.addDialogVisible=!1,e.loadMonitor())}))}))}}},vt=bt,_t=(a("2941"),Object(f["a"])(vt,dt,ct,!1,null,null,null)),yt=_t.exports,wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"setting"}},[a("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.Loading,expression:"Loading"}],ref:"data",attrs:{"label-position":"top",rules:t.rules,model:t.data,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"Server酱Token",prop:"server_jiang_token"}},[a("el-row",[a("el-col",{attrs:{span:22}},[a("el-input",{attrs:{placeholder:"配置Server酱Token即可接受报警信息"},model:{value:t.data.server_jiang_token,callback:function(e){t.$set(t.data,"server_jiang_token",e)},expression:"data.server_jiang_token"}})],1),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"success"},on:{click:t.sendTest}},[t._v("测试")])],1)],1)],1),a("el-form-item",{attrs:{label:"HTTP可用性报警阈值(次)"}},[a("el-input-number",{attrs:{min:1,max:15,label:"连续错误N次后触发报警"},model:{value:t.data.max_error_num,callback:function(e){t.$set(t.data,"max_error_num",e)},expression:"data.max_error_num"}})],1),a("el-form-item",{attrs:{label:"报警沉默时间(分钟)"}},[a("el-input-number",{attrs:{min:0,max:3600,label:"连续错误N次后触发报警"},model:{value:t.data.silence_time,callback:function(e){t.$set(t.data,"silence_time",e)},expression:"data.silence_time"}})],1),a("el-form-item",{attrs:{label:"SSL证书报警天数"}},[a("el-input-number",{attrs:{min:0,max:30,label:"<=此天数将会触发报警"},model:{value:t.data.ssl_min_day,callback:function(e){t.$set(t.data,"ssl_min_day",e)},expression:"data.ssl_min_day"}})],1),a("el-form-item",{attrs:{label:"域名过期报警天数"}},[a("el-input-number",{attrs:{min:0,max:365,label:"<=此天数将会触发报警"},model:{value:t.data.host_expire_min_day,callback:function(e){t.$set(t.data,"host_expire_min_day",e)},expression:"data.host_expire_min_day"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.save}},[t._v("保存")])],1)],1)],1)},Dt=[],xt={name:"setting",data:function(){return{Loading:!0,data:{server_jiang_token:"",max_error_num:3,silence_time:60,ssl_min_day:10,host_expire_min_day:30},rules:{name:[{required:!1,message:"请输入Server酱Token",trigger:"blur"}]}}},methods:{save:function(){var t=this;this.$refs["data"].validate((function(e){if(!e)return!1;var a=t;t.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/save",data:w.a.stringify(t.data)}).then((function(t){0!=t.data.code?(a.$notify.error({title:"错误",message:t.data.msg}),a.Loading=!1):(a.Loading=!1,a.$notify({title:"成功",message:"状态修改成功",type:"success"}))}))}))},load:function(){var t=this;this.Loading=!0,x()({method:"get",url:window.host+"/setting/info"}).then((function(e){t.data=e.data.res,t.Loading=!1}))},sendTest:function(){var t=this;this.Loading=!0,x()({method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded"},url:window.host+"/setting/send",data:w.a.stringify(this.data)}).then((function(e){t.Loading=!1,0==e.data.code?t.$notify({title:"成功",message:"发送成功",type:"success"}):t.$notify({title:"失败",message:e.data.msg,type:"error"})}))}},created:function(){this.load()}},kt=xt,$t=(a("7df6"),Object(f["a"])(kt,wt,Dt,!1,null,null,null)),Ct=$t.exports;s["default"].component("tab-http",A),s["default"].component("tab-home",g),s["default"].component("tab-server",X),s["default"].component("tab-ssl",lt),s["default"].component("tab-host_expire",yt),s["default"].component("tab-setting",Ct);var St={name:"navigation",props:{msg:String},data:function(){return{currentTab:"Home"}},computed:{currentTabComponent:function(){return"tab-"+this.currentTab.toLowerCase()}}},Tt=St,Lt=(a("f90c"),Object(f["a"])(Tt,l,d,!1,null,null,null)),Rt=Lt.exports,Mt={name:"App",components:{navigation:Rt}},Et=Mt,Ot=(a("034f"),Object(f["a"])(Et,n,o,!1,null,null,null)),Vt=Ot.exports;s["default"].use(r.a),new s["default"]({el:"#app",render:function(t){return t(Vt)}})},"7df6":function(t,e,a){"use strict";a("251c")},"822d":function(t,e,a){},"85ec":function(t,e,a){},"8c02":function(t,e,a){"use strict";a("fe24")},9950:function(t,e,a){"use strict";a("44ad2")},"9cb8":function(t,e,a){},b5be:function(t,e,a){},d42d:function(t,e,a){},d82a:function(t,e,a){"use strict";a("4490")},e73d:function(t,e,a){"use strict";a("b5be")},ee01:function(t,e,a){"use strict";a("3b60")},f635:function(t,e,a){"use strict";a("9cb8")},f90c:function(t,e,a){"use strict";a("d42d")},fe24:function(t,e,a){}});
//# sourceMappingURL=app.5fb19123.js.map